<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | TechMatts</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" href="media/Logo/create-a-logo-for-my-website-the-weebsit_AqrFmCw0SiWsRMtLV8HPBw_6NSYBivoQg2-89jA-pvVVw.jpeg" type="image/x-icon">
    <style>
        /* Checkout Page Styles */
        .checkout-page {
            padding: 120px 0 60px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }

        .checkout-container {
            display: flex;
            gap: 80px;
            margin-top: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .billing-section {
            flex: 2;
            background: var(--dark);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            margin-top: 100px;
        }

        .order-summary {
            flex: 1;
            background: var(--dark);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            margin-top: 100px;
        }

        /* Form Styles */
        .checkout-form h1 {
            font-size: 24px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: var(--text-color);
        }

        .checkout-form h2 {
            font-size: 18px;
            margin: 25px 0 15px;
            color: var(--text-color);
        }

        .checkout-form h3 {
            font-size: 16px;
            margin: 20px 0 10px;
            color: var(--text-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        input[type="text"],
        input[type="tel"],
        input[type="email"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            font-size: 14px;
            background-color: #1e1e1e;
            color: var(--text-color);
        }

        /* Country Section */
        .country-section {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .country-section h3 {
            color: var(--text-color);
        }

        /* Order Summary */
        .order-items {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .order-items th {
            text-align: left;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-weight: 600;
            color: var(--text-color);
        }

        .order-items td {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            vertical-align: middle;
            color: var(--text-color);
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .product-info img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
        }

        /* Summary Rows */
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .total-row {
            font-weight: 600;
            font-size: 18px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: var(--text-color);
        }

        /* Payment Methods */
        .payment-methods {
            margin-top: 30px;
        }

        .payment-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
            background-color: #1e1e1e;
        }

        .payment-option input {
            margin-right: 10px;
        }

        .payment-option label {
            color: var(--text-color);
            cursor: pointer;
        }

        /* Terms */
        .terms-checkbox {
            margin: 20px 0;
            display: flex;
            align-items: center;
        }

        .terms-checkbox input {
            margin-right: 10px;
        }

        .terms-checkbox label {
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Buttons */
        .payment-btn {
            display: block;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .bkash-btn {
            background-color: #e2136e;
            color: white;
        }

        .bkash-btn:hover {
            background-color: #c0105d;
        }

        /* Additional Info */
        .additional-info {
            margin-top: 30px;
        }

        .additional-info label {
            color: var(--text-color);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .checkout-container {
                flex-direction: column;
            }
            
            .billing-section,
            .order-summary {
                margin-top: 50px;
            }
        }

        @media (max-width: 576px) {
            .checkout-page {
                padding: 100px 0 40px;
            }
            
            .billing-section,
            .order-summary {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Same Header as index.html -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">TechMatts</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="shop.html">Shop</a>
                <a href="contact.html">Contact</a>
                <a href="login.html">Login/Register</a>
                <div class="cart-icon">
                    <a href="cart.html"><i class="fas fa-shopping-cart"></i></a>
                    <span class="cart-count">0</span>
                    <div class="cart-dropdown"></div>
                </div>
            </div>
            <button class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Checkout Content -->
    <div style="margin-top: 50px;padding-bottom: 100px;" class="container">
        <div class="checkout-container">
            <!-- Billing Section -->
            <div style="margin-top: 100px;" class="billing-section">
                <h1>BILLING & SHIPPING</h1>
                
                <form id="checkout-form">
                    <div class="form-group">
                        <label for="first-name">First name *</label>
                        <input type="text" id="first-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="last-name">Last name *</label>
                        <input type="text" id="last-name" required>
                    </div>
                    
                    <div class="country-section">
                        <h3>Country / Region *</h3>
                        <select id="country" disabled>
                            <option value="Bangladesh" selected>Bangladesh</option>
                        </select>
                    </div>
                    
                    <h3 style="color: whitesmoke;">Street address *</h3>
                    <div class="form-group">
                        <input type="text" placeholder="House number and street name" required>
                    </div>
                    
                    <h3 style="color: whitesmoke;">Town / City *</h3>
                    <div class="form-group">
                        <select id="district" required>
                            <option value="">Select an option...</option>
                            <option value="Dhaka">Dhaka</option>
                            <option value="Chittagong">Chittagong</option>
                            <option value="Sylhet">Sylhet</option>
                            <option value="Khulna">Khulna</option>
                            <option value="Barishal">Barishal</option>
                            <option value="Rajshahi">Rajshahi</option>
                            <option value="Rangpur">Rangpur</option>
                            <option value="Mymensingh">Mymensingh</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="postcode">Postcode / ZIP (optional)</label>
                        <input type="text" id="postcode">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone *</label>
                        <input type="tel" id="phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email address *</label>
                        <input type="email" id="email" required>
                    </div>
                    
                    <div class="additional-info">
                        <label for="order-notes">Order notes (optional)</label>
                        <textarea id="order-notes" rows="4" placeholder="Notes about your order, e.g. special notes for delivery"></textarea>
                    </div>
                </form>
            </div>
            
            <!-- Order Summary -->
            <div style="margin-top: 100px;" class="order-summary">
                <h2>YOUR ORDER</h2>
                
                <table class="order-items">
                    <thead>
                        <tr>
                            <th>PRODUCT</th>
                            <th>SUBTOTAL</th>
                        </tr>
                    </thead>
                    <tbody id="order-items-list">
                        <!-- Filled by JavaScript -->
                    </tbody>
                </table>
                
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="subtotal">0.00৳</span>
                </div>
                
                <div class="summary-row total-row">
                    <span>Total</span>
                    <span id="total">0.00৳</span>
                </div>
                
                <div class="payment-methods">
                    <h3>Payment Method</h3>
                    
                    <div class="payment-option">
                        <input type="radio" id="bkash" name="payment" value="bkash" checked>
                        <label for="bkash">Pay with bKash</label>
                    </div>
                    
                    <div class="payment-option">
                        <input type="radio" id="sslcommerz" name="payment" value="sslcommerz">
                        <label for="sslcommerz">Pay Online (Credit/Debit Card/MobileBanking/NetBanking/bKash)</label>
                    </div>
                    
                    <div class="terms-checkbox">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">I have read and agree to the website terms and conditions, privacy policy *</label>
                    </div>
                    
                    <button type="submit" form="checkout-form" class="payment-btn bkash-btn">CONFIRM ORDER</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <!-- Footer (Same as other pages) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-section">
                <h3>TechMatts</h3>
                <p>Your one-stop shop for premium PC accessories that combine functionality with style.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="login.html">Login</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: info@techmatts.com</p>
                <p>Phone: (123) 456-7890</p>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 TechMatts. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Load cart items from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const orderItemsList = document.getElementById('order-items-list');
            let subtotal = 0;
            
            // Render cart items
            if (cart.length > 0) {
                orderItemsList.innerHTML = cart.map(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    
                    return `
                        <tr>
                            <td>
                                <div class="product-info">
                                    <img src="${item.image}" alt="${item.name}">
                                    <span>${item.name} - ${item.sizes?.[0]?.dimensions || ''}</span>
                                </div>
                            </td>
                            <td>${itemTotal.toFixed(2)}৳</td>
                        </tr>
                    `;
                }).join('');
            } else {
                orderItemsList.innerHTML = '<tr><td colspan="2">Your cart is empty</td></tr>';
                // Redirect to shop if cart is empty
                setTimeout(() => {
                    window.location.href = 'shop.html';
                }, 2000);
            }
            
            // Update totals
            document.getElementById('subtotal').textContent = `${subtotal.toFixed(2)}৳`;
            document.getElementById('total').textContent = `${subtotal.toFixed(2)}৳`;
            
            // Update cart counter
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.querySelector('.cart-count').textContent = cartCount;
            
            // Form validation and submission
            document.getElementById('checkout-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate required fields
                const requiredFields = ['first-name', 'last-name', 'district', 'phone', 'email'];
                let isValid = true;
                
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.style.borderColor = 'red';
                        isValid = false;
                    } else {
                        field.style.borderColor = '#ddd';
                    }
                });
                
                if (!document.getElementById('terms').checked) {
                    alert('You must agree to the terms and conditions');
                    isValid = false;
                }
                
                if (isValid) {
                    // Prepare order data
                    const orderData = {
                        customer: {
                            firstName: document.getElementById('first-name').value,
                            lastName: document.getElementById('last-name').value,
                            address: document.querySelector('[placeholder="House number and street name"]').value,
                            district: document.getElementById('district').value,
                            postcode: document.getElementById('postcode').value,
                            phone: document.getElementById('phone').value,
                            email: document.getElementById('email').value,
                            notes: document.getElementById('order-notes').value
                        },
                        items: cart,
                        paymentMethod: document.querySelector('input[name="payment"]:checked').value,
                        subtotal: subtotal,
                        total: subtotal,
                        orderNumber: 'ORD-' + Date.now().toString().slice(-6)
                    };
                    
                    // Save order data to sessionStorage
                    sessionStorage.setItem('orderData', JSON.stringify(orderData));
                    
                    // Redirect based on payment method
                    const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
                    if (paymentMethod === 'bkash') {
                        window.location.href = 'bkash-payment.html';
                    } else {
                        // For other payment methods (demo only)
                        alert('Other payment methods not implemented in this demo. Redirecting to bKash.');
                        window.location.href = 'bkash-payment.html';
                    }
                }
            });
            
            // For "Buy Now" direct checkout
            const directProduct = JSON.parse(sessionStorage.getItem('directProduct'));
            if (directProduct) {
                cart.push(directProduct);
                localStorage.setItem('cart', JSON.stringify(cart));
                sessionStorage.removeItem('directProduct');
                location.reload();
            }
        });
        
        // For "Buy Now" from product pages
        function buyNow(product) {
            sessionStorage.setItem('directProduct', JSON.stringify({ ...product, quantity: 1 }));
            window.location.href = 'checkout.html';
        }
    </script>
</body>
</html>